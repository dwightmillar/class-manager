"use strict";(self.webpackChunkclass_manager=self.webpackChunkclass_manager||[]).push([[4],{4:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(123),n=a(466),l=a(387),c=a(638),r=a(374),i=a(429);function o(e){let{classes:t,setClasses:a}=e;return n.createElement("nav",null,n.createElement("ul",{id:"tab-list",className:"nav nav-tabs"},t?n.createElement(n.Fragment,null,n.createElement(d,(0,s.Z)({},e,{classes:t})),n.createElement(m,{key:"tab-0",setClasses:a})):null))}function d(e){return e.classes.map(((t,a,l)=>n.createElement(u,(0,s.Z)({},e,{data:t,key:"tab-"+(l.length-a)}))))}function u({data:e}){let{id:t,title:a}=e,s="/"+t;return n.createElement("li",{className:"nav-item"},n.createElement(i.OL,{to:s,className:"nav-link",activeClassName:"nav-link active"},a))}function m({setClasses:e}){const[t,a]=(0,n.useState)({placeholder:"+",className:"addtab",value:""});return n.createElement("li",{className:"nav-item"},n.createElement("form",{className:"fullheight",onSubmit:s=>{s.preventDefault(),r.Z.class.add(t.value).then((({data:s})=>{e({data:{title:t.value,id:s.insertId}}),a({...t,value:""})})).catch((e=>console.error(e)))}},n.createElement("input",{id:"add-class",type:"text",style:{display:"inline-block",border:"none",cursor:"pointer",padding:"0.1em 0 0 1em",height:"40px",width:"fit-content"},className:t.className,placeholder:t.placeholder,value:t.value,onChange:({currentTarget:e})=>{a({...t,value:e.value})},onFocus:()=>{a({...t,placeholder:"Enter Class",className:"nav-link"})},onBlur:()=>{a({...t,placeholder:"+",className:"addtab"})}})))}const p=(0,n.lazy)((()=>a.e(928).then(a.bind(a,928)))),f=(0,n.lazy)((()=>a.e(357).then(a.bind(a,357)))),h=(0,l.EN)((function(e){const[t,a]=(0,n.useState)({mounted:!1,classes:null,modal:null});function i({data:e}){if(null===t.classes||e.prototype===Array.prototype)return a({...t,classes:e});const s=t.classes.findIndex((t=>t.id==e.id));-1===s?function(e){let s=t.classes;s.push(e),c.Z.push("/"+e.id),a({...t,classes:s})}(e):function(e,s){let n=t.classes[s-1]?t.classes[s-1].id:"welcome",l=t.classes.filter((t=>t.id!=e));c.Z.replace("/"+n),a({...t,classes:l})}(e.id,s)}function d(e=null){a({...t,modal:e})}return(0,n.useEffect)((()=>{t.mounted||a({...t,mounted:!0})}),[]),(0,n.useEffect)((()=>{t.mounted&&r.Z.class.load().then(i).catch((e=>console.error(e)))}),[t.mounted]),(0,n.useEffect)((()=>{t.classes&&(t.classes.length?void 0===t.classes.find((({id:t})=>t==e.location.pathname.split("/")[1]))&&c.Z.replace("/".concat(t.classes[0].id)):c.Z.replace("/welcome"))}),[t.classes]),n.createElement("div",{id:"app"},t.modal,n.createElement(o,(0,s.Z)({},e,{classes:t.classes,setClasses:i})),n.createElement(l.rs,null,n.createElement(l.AW,{exact:!0,path:"/",render:()=>n.createElement(l.l_,{to:"/ "})}),n.createElement(l.AW,{exact:!0,path:"/welcome",component:p}),n.createElement(l.AW,{path:"/:classId",render:e=>{var a;return n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading...")},n.createElement(f,(0,s.Z)({},e,{title:t.classes?null===(a=t.classes.find((({id:t})=>t==e.match.params.classId)))||void 0===a?void 0:a.title:null,setClasses:i,toggleModal:d})))}})))}))},374:(e,t,a)=>{async function s(e="GET",t,a={}){try{if(!t||t.prototype===Request.prototype&&!t.url)throw Error("Must define URL");let{headers:s,body:n,credentials:l,cache:c,redirect:r,referrer:i,referrerPolicy:o,integrity:d,keepalive:u,signal:m}=a;a.method=e,"GET"===e||"HEAD"===e?a.body=void 0:"string"!=typeof n&&(a.body=JSON.stringify(n)),s||(s=new Headers,s.set("Accept","application/json"),a.body&&s.set("Content-Type","application/json"),a.headers=s);let p=await fetch(t,a);switch(String(p.status)[0]){case"4":throw Error("Bad request");case"5":throw Error("Server unavailable")}const f=p.headers.get("content-type");if(!f||!f.includes("application/json"))throw new TypeError("Response not in JSON");return{...await p.json(),success:!0}}catch(e){return console.error("Fetch failed:",e),{success:!1}}}a.d(t,{Z:()=>n});const n={class:{load:async function(){return await s("GET","/api/classes")},add:async function(e){let t={name:e};return await s("POST","/api/classes",{body:t})},delete:async function(e){return await s("DELETE","/api/classes",{body:{id:e}})}},student:{load:async function(e){return await s("GET","/api/students?classId=".concat(e))},add:async function(e,t){let a={name:e,classId:t};return await s("POST","/api/students",{body:a})},delete:async function(e){const t={id:e};return await s("DELETE","/api/students",{body:t})}},assignment:{load:async function(e){return await s("GET","/api/assignments?classId=".concat(e))},add:async function(e){let t={scores:e};return await s("POST","/api/assignments",{body:t})},update:async function(e){let t={scores:e};return await s("PATCH","/api/assignments",{body:t})}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixPQUFBQSxHQUViLGFBRHFCdkMsRUFBWSxRQUFTLG1CQUFvQixDQUFFUSxLQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NsYXNzLW1hbmFnZXIvLi9zcmMvY29tcG9uZW50cy9DbGFzc1RhYnMuanN4Iiwid2VicGFjazovL2NsYXNzLW1hbmFnZXIvLi9zcmMvQXBwLmpzeCIsIndlYnBhY2s6Ly9jbGFzcy1tYW5hZ2VyLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovL2NsYXNzLW1hbmFnZXIvLi9zcmMvY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IE5hdkxpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJ1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlci5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ocHJvcHMpXG57XG4gIGxldCB7Y2xhc3Nlcywgc2V0Q2xhc3Nlc30gPSBwcm9wc1xuXG4gIHJldHVybiAoXG4gICAgPG5hdj5cbiAgICAgIDx1bCBpZD1cInRhYi1saXN0XCIgY2xhc3NOYW1lPVwibmF2IG5hdi10YWJzXCIgPlxuICAgICAgICB7IGNsYXNzZXMgPyBcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPE5hdlRhYnMgey4uLnByb3BzfSBjbGFzc2VzPXtjbGFzc2VzfS8+XG4gICAgICAgICAgICA8QWRkQ2xhc3NUYWIga2V5PVwidGFiLTBcIiBzZXRDbGFzc2VzPXtzZXRDbGFzc2VzfS8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICAgOlxuICAgICAgICAgIG51bGx9XG4gICAgICA8L3VsID5cbiAgICA8L25hdj5cbiAgKVxufVxuXG5mdW5jdGlvbiBOYXZUYWJzKHByb3BzKVxue1xuICByZXR1cm4gcHJvcHMuY2xhc3Nlcy5tYXAoKGRhdGEsIGluZGV4LCBhcnJheSkgPT4gPE5hdlRhYiB7Li4ucHJvcHN9IGRhdGE9e2RhdGF9IGtleT17J3RhYi0nKyhhcnJheS5sZW5ndGggLSBpbmRleCl9Lz4pXG59XG5cbmZ1bmN0aW9uIE5hdlRhYih7IGRhdGEgfSlcbntcbiAgICBsZXQgeyBpZCwgdGl0bGUgfSA9IGRhdGFcbiAgICBsZXQgZGVzdGluYXRpb24gPSAnLycgKyBpZFxuICAgIHJldHVybiAoXG4gICAgICAgIDxsaSBjbGFzc05hbWU9XCJuYXYtaXRlbVwiPlxuICAgICAgICAgICAgPE5hdkxpbmsgdG89e2Rlc3RpbmF0aW9ufSBjbGFzc05hbWU9XCJuYXYtbGlua1wiIGFjdGl2ZUNsYXNzTmFtZT1cIm5hdi1saW5rIGFjdGl2ZVwiPlxuICAgICAgICAgICAgICAgIHt0aXRsZX1cbiAgICAgICAgICAgIDwvTmF2TGluaz5cbiAgICAgICAgPC9saT5cbiAgICApXG59XG5cbmZ1bmN0aW9uIEFkZENsYXNzVGFiKHtzZXRDbGFzc2VzfSlcbntcbiAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnKycsXG4gICAgICBjbGFzc05hbWU6ICdhZGR0YWInLFxuICAgICAgdmFsdWU6ICcnXG4gICAgfSlcblxuICAgIGxldCBzaG93SW5wdXQgPSAoKSA9PiB7XG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBwbGFjZWhvbGRlcjogJ0VudGVyIENsYXNzJyxcbiAgICAgICAgY2xhc3NOYW1lOiAnbmF2LWxpbmsnXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxldCBzaG93SWNvbiA9ICgpID0+IHtcbiAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHBsYWNlaG9sZGVyOiAnKycsXG4gICAgICAgIGNsYXNzTmFtZTogJ2FkZHRhYidcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGV0IHVwZGF0ZVZhbHVlID0gKHtjdXJyZW50VGFyZ2V0fSkgPT4ge1xuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgdmFsdWU6IGN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGV0IHN1Ym1pdEhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGNvbnRyb2xsZXIuY2xhc3MuYWRkKHN0YXRlLnZhbHVlKVxuICAgICAgLnRoZW4oKHtkYXRhfSkgPT4ge1xuICAgICAgICBzZXRDbGFzc2VzKHsnZGF0YSc6IHsndGl0bGUnOiBzdGF0ZS52YWx1ZSwgJ2lkJzogZGF0YS5pbnNlcnRJZH19KVxuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgdmFsdWU6ICcnXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8bGkgY2xhc3NOYW1lPVwibmF2LWl0ZW1cIj5cbiAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwiZnVsbGhlaWdodFwiIG9uU3VibWl0PXtzdWJtaXRIYW5kbGVyfT5cbiAgICAgICAgICA8aW5wdXQgaWQ9XCJhZGQtY2xhc3NcIiB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICBzdHlsZT17e2Rpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCBib3JkZXI6ICdub25lJywgY3Vyc29yOiAncG9pbnRlcicsIHBhZGRpbmc6ICcwLjFlbSAwIDAgMWVtJywgaGVpZ2h0OiAnNDBweCcsIHdpZHRoOiAnZml0LWNvbnRlbnQnIH19XG4gICAgICAgICAgICBjbGFzc05hbWU9e3N0YXRlLmNsYXNzTmFtZX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtzdGF0ZS5wbGFjZWhvbGRlcn1cbiAgICAgICAgICAgIHZhbHVlPXtzdGF0ZS52YWx1ZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXt1cGRhdGVWYWx1ZX1cbiAgICAgICAgICAgIG9uRm9jdXM9e3Nob3dJbnB1dH1cbiAgICAgICAgICAgIG9uQmx1cj17c2hvd0ljb259XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9saT5cbiAgICApXG59IiwiaW1wb3J0IFJlYWN0LCB7IGxhenksIHVzZVN0YXRlLCB1c2VFZmZlY3QsIFN1c3BlbnNlIH0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IFJlZGlyZWN0IH0gZnJvbSAncmVhY3Qtcm91dGVyJ1xuaW1wb3J0IHsgd2l0aFJvdXRlciwgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlLCBTd2l0Y2ggfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiXG5pbXBvcnQgaGlzdG9yeSBmcm9tICcuL2hpc3RvcnkuanMnXG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXIuanMnXG5pbXBvcnQgQ2xhc3NUYWJzIGZyb20gXCIuL2NvbXBvbmVudHMvQ2xhc3NUYWJzLmpzeFwiXG5jb25zdCBXZWxjb21lVmlldyA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL3ZpZXdzL3dlbGNvbWUvaW5kZXguanN4JykpXG5jb25zdCBDbGFzc1ZpZXcgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vdmlld3MvY2xhc3MvaW5kZXguanN4XCIpKVxuaW1wb3J0IFwiLi9zdHlsZS5jc3NcIlxuXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKGZ1bmN0aW9uKHByb3BzKXtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgbW91bnRlZDogZmFsc2UsXG4gICAgY2xhc3NlczogbnVsbCxcbiAgICBtb2RhbDogbnVsbCxcbiAgfSlcblxuICB1c2VFZmZlY3QoICgpID0+IHtcbiAgICBpZiAoIXN0YXRlLm1vdW50ZWQpIHNldFN0YXRlKHsuLi5zdGF0ZSwgbW91bnRlZDogdHJ1ZX0pXG4gIH0sIFtdKVxuXG4gIHVzZUVmZmVjdCggKCkgPT4ge1xuICAgIGlmICghc3RhdGUubW91bnRlZCkgcmV0dXJuXG5cbiAgICBjb250cm9sbGVyLmNsYXNzLmxvYWQoKVxuICAgIC50aGVuKCBzZXRDbGFzc2VzIClcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGVycm9yKSlcbiAgfSAsIFtzdGF0ZS5tb3VudGVkXSlcblxuICB1c2VFZmZlY3QoICgpID0+IHtcbiAgICBpZiAoIXN0YXRlLmNsYXNzZXMpIHJldHVyblxuICAgIGlmICghc3RhdGUuY2xhc3Nlcy5sZW5ndGgpIHtcbiAgICAgIGhpc3RvcnkucmVwbGFjZSgnL3dlbGNvbWUnKVxuICAgIH0gZWxzZSBpZiAoc3RhdGUuY2xhc3Nlcy5maW5kKCAoe2lkfSkgPT4gaWQgPT0gcHJvcHMubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKVsxXSApID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGhpc3RvcnkucmVwbGFjZShgLyR7c3RhdGUuY2xhc3Nlc1swXS5pZH1gKVxuICAgIH0gXG4gIH0sIFtzdGF0ZS5jbGFzc2VzXSlcblxuXG4gIGZ1bmN0aW9uIHNldENsYXNzZXMoe2RhdGF9KVxuICB7XG4gICAgaWYgKHN0YXRlLmNsYXNzZXMgPT09IG51bGwgfHwgZGF0YS5wcm90b3R5cGUgPT09IEFycmF5LnByb3RvdHlwZSkgXG4gICAgcmV0dXJuIHNldFN0YXRlKHsgLi4uc3RhdGUsIGNsYXNzZXM6IGRhdGEgfSlcblxuICAgIGNvbnN0IGNsYXNzSW5kZXggPSBzdGF0ZS5jbGFzc2VzLmZpbmRJbmRleCggKGNsYXNzRGF0YSkgPT4gY2xhc3NEYXRhLmlkID09IGRhdGEuaWQgKVxuICAgIGNvbnN0IGNsYXNzRG9lc05vdEV4aXN0ID0gY2xhc3NJbmRleCA9PT0gLTEgPyB0cnVlIDogZmFsc2VcbiAgICBpZiAoY2xhc3NEb2VzTm90RXhpc3QpIGNyZWF0ZUNsYXNzKGRhdGEpXG4gICAgZWxzZSByZW1vdmVDbGFzcyhkYXRhLmlkLCBjbGFzc0luZGV4KVxuXG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG5ld0NsYXNzKVxuICAgIHtcbiAgICAgIGxldCBjbGFzc2VzID0gc3RhdGUuY2xhc3Nlc1xuICAgICAgY2xhc3Nlcy5wdXNoKG5ld0NsYXNzKVxuICAgICAgaGlzdG9yeS5wdXNoKCcvJyArIG5ld0NsYXNzLmlkKVxuICAgICAgc2V0U3RhdGUoeyAuLi5zdGF0ZSwgY2xhc3NlcyB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGlkLCBpbmRleClcbiAgICB7XG4gICAgICBsZXQgcm91dGUgPSBzdGF0ZS5jbGFzc2VzW2luZGV4IC0gMV0gPyBzdGF0ZS5jbGFzc2VzW2luZGV4IC0gMV0uaWQgOiAnd2VsY29tZSdcbiAgICAgIGxldCBjbGFzc2VzID0gc3RhdGUuY2xhc3Nlcy5maWx0ZXIoIChjbGFzc0RhdGEpID0+IGNsYXNzRGF0YS5pZCAhPSBpZCApXG4gICAgICBoaXN0b3J5LnJlcGxhY2UoJy8nICsgcm91dGUpXG4gICAgICBzZXRTdGF0ZSh7IC4uLnN0YXRlLCBjbGFzc2VzIH0pICAgIFxuICAgIH1cbiAgfVxuXG5cbiAgZnVuY3Rpb24gdG9nZ2xlTW9kYWwobW9kYWwgPSBudWxsKVxuICB7XG4gICAgIHNldFN0YXRlKHsgLi4uc3RhdGUsIG1vZGFsIH0pXG4gIH1cblxuXG4gIHJldHVybihcbiAgICA8ZGl2IGlkPVwiYXBwXCI+XG4gICAgICB7c3RhdGUubW9kYWx9XG5cbiAgICAgIDxDbGFzc1RhYnMgey4uLnByb3BzfSBjbGFzc2VzPXtzdGF0ZS5jbGFzc2VzfSBzZXRDbGFzc2VzPXtzZXRDbGFzc2VzfS8+XG5cbiAgICAgICAgPFN3aXRjaD5cbiAgICAgICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi9cIiByZW5kZXI9eygpID0+IDxSZWRpcmVjdCB0bz0nLyAnIC8+fSAvPlxuICAgICAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiL3dlbGNvbWVcIiBjb21wb25lbnQ9e1dlbGNvbWVWaWV3fSAvPlxuICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiLzpjbGFzc0lkXCIgcmVuZGVyPXsocHJvcHMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5Mb2FkaW5nLi4uPC9kaXY+fT5cbiAgICAgICAgICAgICAgICA8Q2xhc3NWaWV3IHsuLi5wcm9wc30gdGl0bGU9e3N0YXRlLmNsYXNzZXMgPyBzdGF0ZS5jbGFzc2VzLmZpbmQoICh7aWR9KSA9PiBpZCA9PSBwcm9wcy5tYXRjaC5wYXJhbXMuY2xhc3NJZCApPy50aXRsZSA6IG51bGx9IHNldENsYXNzZXM9e3NldENsYXNzZXN9IHRvZ2dsZU1vZGFsPXt0b2dnbGVNb2RhbH0vPlxuICAgICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH19Lz5cbiAgICAgICAgPC9Td2l0Y2g+XG4gICAgPC9kaXY+XG4gIClcbn0pIiwiLyoqXG4gKiBGZXRjaCBvcHRpb25zIGFzIGRlZmluZWQgYnkgTUROLlxuICogQHR5cGVkZWYge29iamVjdH0gRmV0Y2hJbml0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gbWV0aG9kIEFuIEhUVFAgbWV0aG9kLCBHRVQgYnkgZGVmYXVsdC4gVGhpcyB3aWxsIGJlIG92ZXJyaWRkZW4uXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfEhlYWRlcnN9IGhlYWRlcnMgQW4geyBhcnJheSBvZiBoZWFkZXIgc3RyaW5ncyB8IGluc3RhbmNlIG9mIHRoZSBIZWFkZXJzIGNsYXNzIH0uXG4gKiBAcHJvcGVydHkge3N0cmluZ3xCbG9ifEJ1ZmZlclNvdXJjZXxGb3JtRGF0YXxVUkxTZWFyY2hQYXJhbXN8UmVhZGFibGVTdHJlYW19IGJvZHkgVGhlIGJvZHkgb2YgdGhlIHJlcXVlc3QuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbW9kZVxuICogLSBuby1jb3JzXG4gKiAtICpjb3JzXG4gKiAtIHNhbWUtb3JpZ2luXG4gKiBAcHJvcGVydHkge29iamVjdH0gY3JlZGVudGlhbHNcbiAqIC0gaW5jbHVkZVxuICogLSpzYW1lLW9yaWdpblxuICogLSBvbWl0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gY2FjaGVcbiAqIC0gKmRlZmF1bHRcbiAqIC0gbm8tc3RvcmVcbiAqIC0gcmVsb2FkXG4gKiAtIG5vLWNhY2hlXG4gKiAtIGZvcmNlLWNhY2hlXG4gKiAtIG9ubHktaWYtY2FjaGVkXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcmVkaXJlY3RcbiAqIC0gKmZvbGxvdyxcbiAqIC0gZXJyb3JcbiAqIC0gbWFudWFsLFxuICogQHByb3BlcnR5IHtVU1ZTdHJpbmd9IHJlZmVycmVyIEEgVVNWU3RyaW5nIHNwZWNpZnlpbmcgdGhlIHJlZmVycmVyIG9mIHRoZSByZXF1ZXN0LlxuICogLSBzYW1lLW9yaWdpbiBVUkxcbiAqIC0gKmFib3V0OmNsaWVudFxuICogLSBcIlwiIFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHJlZmVycmVyUG9saWN5XG4gKiAtIFwiXCJcbiAqIC0gbm8tcmVmZXJyZXJcbiAqIC0gbm8tcmVmZXJyZXItd2hlbi1kb3duZ3JhZGVcbiAqIC0gc2FtZS1vcmlnaW5cbiAqIC0gb3JpZ2luXG4gKiAtIHN0cmljdC1vcmlnaW5cbiAqIC0gb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luXG4gKiAtICpzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luXG4gKiAtIHVuc2FmZS11cmxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpbnRlZ3JpdHkgVGhlIGtub3duLWFoZWFkIGNoZWNrc3VtLlxuICogQHByb3BlcnR5IHtib29sZWFufSBrZWVwYWxpdmUgV2hldGhlciBvciBub3QgdG8gcGVyZm9ybSByZXF1ZXN0IGluIGJhY2tncm91bmQgZXZlbiBhZnRlciBsZWF2aW5nIHBhZ2UuIFxuICogQHByb3BlcnR5IHtBYm9ydFNpZ25hbH0gc2lnbmFsIEFuIEFib3J0U2lnbmFsIG9iamVjdCBpbnN0YW5jZTsgYWxsb3dzIHlvdSB0byBjb21tdW5pY2F0ZSB3aXRoIGEgZmV0Y2ggcmVxdWVzdCBhbmQgYWJvcnQgaXQgaWYgZGVzaXJlZCB2aWEgYW4gQWJvcnRDb250cm9sbGVyLlxuICovXG5cblxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBBbiBIVFRQIG1ldGhvZCwgR0VUIGJ5IGRlZmF1bHQuXG4gKiBAcGFyYW0ge3N0cmluZ3xSZXF1ZXN0fSByZXNvdXJjZSBBIHsgVVJMIHN0cmluZyB8IFJlcXVlc3Qgb2JqZWN0IH0uXG4gKiBAcGFyYW0ge29iamVjdH0gaW5pdCBPcHRpb25zIGZvciBjb25maWd1cmluZyB0aGUgUmVxdWVzdC4gVGhpcyBpcyBvcHRpb25hbC5cbiAqIFxuICogXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHJlc3BvbnNlIGluIEpTT04tZm9ybWF0LlxuICovXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kUmVxdWVzdChtZXRob2QgPSAnR0VUJywgcmVzb3VyY2UsIGluaXQgPSB7fSlcbntcbiAgICB0cnkge1xuICAgICAgICBpZiAoIXJlc291cmNlIHx8IChyZXNvdXJjZS5wcm90b3R5cGUgPT09IFJlcXVlc3QucHJvdG90eXBlICYmICFyZXNvdXJjZS51cmwpKSB0aHJvdyBFcnJvcignTXVzdCBkZWZpbmUgVVJMJylcblxuICAgICAgICBsZXQgeyBoZWFkZXJzLCBib2R5LCBjcmVkZW50aWFscywgY2FjaGUsIHJlZGlyZWN0LCByZWZlcnJlciwgcmVmZXJyZXJQb2xpY3ksIGludGVncml0eSwga2VlcGFsaXZlLCBzaWduYWwgfSA9IGluaXRcbiAgICAgICAgaW5pdC5tZXRob2QgPSBtZXRob2RcblxuICAgICAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiIHx8IG1ldGhvZCA9PT0gXCJIRUFEXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGluaXQuYm9keSA9IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBib2R5ICE9PSAnc3RyaW5nJylcbiAgICAgICAge1xuICAgICAgICAgICAgaW5pdC5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaGVhZGVycylcbiAgICAgICAge1xuICAgICAgICAgICAgaGVhZGVycyA9IG5ldyBIZWFkZXJzKClcbiAgICAgICAgICAgIGhlYWRlcnMuc2V0KCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpIC8vdGVsbHMgc2VydmVyIHRoaXMgZGF0YXR5cGUgY2FuIGJlIHNlbnQgYmFja1xuICAgICAgICAgICAgaWYgKGluaXQuYm9keSkgaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJykgLy90ZWxscyBzZXJ2ZXIgd2hhdCB0eXBlIG9mIGRhdGEgaXMgYmVpbmcgc2VudFxuICAgICAgICAgICAgaW5pdC5oZWFkZXJzID0gaGVhZGVyc1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlc291cmNlLCBpbml0KVxuXG5cbiAgICAgICAgc3dpdGNoIChTdHJpbmcocmVzcG9uc2Uuc3RhdHVzKVswXSlcbiAgICAgICAge1xuICAgICAgICAgICAgY2FzZSAnNCc6IHRocm93IEVycm9yKCdCYWQgcmVxdWVzdCcpXG4gICAgICAgICAgICBjYXNlICc1JzogdGhyb3cgRXJyb3IoJ1NlcnZlciB1bmF2YWlsYWJsZScpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG4gICAgICAgIGlmICghY29udGVudFR5cGUgfHwgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJSZXNwb25zZSBub3QgaW4gSlNPTlwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IHBhcnNlZFJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gey4uLnBhcnNlZFJlc3BvbnNlLCBzdWNjZXNzOnRydWV9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmV0Y2ggZmFpbGVkOicsZXJyb3IpXG4gICAgICAgIHJldHVybiB7c3VjY2VzczogZmFsc2V9XG4gICAgfVxufSIsImltcG9ydCB7IHNlbmRSZXF1ZXN0IH0gZnJvbSBcIi4vdXRpbHMuanNcIlxuXG5jb25zdCBjb250cm9sbGVyID0ge1xuICAgIGNsYXNzOiB7XG4gICAgICAgIGxvYWQ6IGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgc2VuZFJlcXVlc3QoJ0dFVCcsJy9hcGkvY2xhc3NlcycpXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgfSxcbiAgICBcbiAgICAgICAgYWRkOiBhc3luYyBmdW5jdGlvbih0aXRsZSkge1xuICAgICAgICAgICAgbGV0IGJvZHkgPSB7IG5hbWU6IHRpdGxlIH1cbiAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvY2xhc3NlcycsIHsgYm9keSB9KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICAgIH0sXG4gICAgXG4gICAgICAgIGRlbGV0ZTogYXN5bmMgZnVuY3Rpb24oY2xhc3NJZCkge1xuICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgc2VuZFJlcXVlc3QoJ0RFTEVURScsJy9hcGkvY2xhc3NlcycsIHsgYm9keTogeyBpZDogY2xhc3NJZCB9IH0pXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc3R1ZGVudDoge1xuICAgICAgICBsb2FkOiBhc3luYyBmdW5jdGlvbihjbGFzc0lkKSB7XG4gICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdCgnR0VUJywgYC9hcGkvc3R1ZGVudHM/Y2xhc3NJZD0ke2NsYXNzSWR9YClcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVxuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICBcbiAgICAgICAgYWRkOiBhc3luYyBmdW5jdGlvbihuYW1lLCBjbGFzc0lkKSB7XG4gICAgICAgICAgICBsZXQgYm9keSA9IHsgbmFtZSwgY2xhc3NJZCB9XG4gICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3N0dWRlbnRzJywgeyBib2R5IH0pXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgfSxcbiAgICAgIFxuICAgICAgICBkZWxldGU6IGFzeW5jIGZ1bmN0aW9uKHN0dWRlbnRJZCkge1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHsgaWQ6IHN0dWRlbnRJZCB9XG4gICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdCgnREVMRVRFJywnL2FwaS9zdHVkZW50cycsIHsgYm9keSB9KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFzc2lnbm1lbnQ6IHtcbiAgICAgICAgbG9hZDogYXN5bmMgZnVuY3Rpb24oY2xhc3NJZCkge1xuICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgc2VuZFJlcXVlc3QoJ0dFVCcsIGAvYXBpL2Fzc2lnbm1lbnRzP2NsYXNzSWQ9JHtjbGFzc0lkfWApXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgfSxcbiAgICAgIFxuICAgICAgICBhZGQ6IGFzeW5jIGZ1bmN0aW9uKHNjb3Jlcykge1xuICAgICAgICAgICAgbGV0IGJvZHkgPSB7IHNjb3JlcyB9XG4gICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL2Fzc2lnbm1lbnRzJywgeyBib2R5IH0pXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgICAgXG4gICAgICAgIHVwZGF0ZTogYXN5bmMgZnVuY3Rpb24oc2NvcmVzKSB7XG4gICAgICAgICAgICBsZXQgYm9keSA9IHsgc2NvcmVzIH1cbiAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHNlbmRSZXF1ZXN0KCdQQVRDSCcsICcvYXBpL2Fzc2lnbm1lbnRzJywgeyBib2R5IH0pXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29udHJvbGxlciJdLCJuYW1lcyI6WyJwcm9wcyIsImNsYXNzZXMiLCJzZXRDbGFzc2VzIiwiaWQiLCJjbGFzc05hbWUiLCJOYXZUYWJzIiwiQWRkQ2xhc3NUYWIiLCJrZXkiLCJtYXAiLCJkYXRhIiwiaW5kZXgiLCJhcnJheSIsIk5hdlRhYiIsImxlbmd0aCIsInRpdGxlIiwiZGVzdGluYXRpb24iLCJ0byIsImFjdGl2ZUNsYXNzTmFtZSIsInN0YXRlIiwic2V0U3RhdGUiLCJ1c2VTdGF0ZSIsInBsYWNlaG9sZGVyIiwidmFsdWUiLCJvblN1Ym1pdCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjb250cm9sbGVyIiwidGhlbiIsImluc2VydElkIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJ0eXBlIiwic3R5bGUiLCJkaXNwbGF5IiwiYm9yZGVyIiwiY3Vyc29yIiwicGFkZGluZyIsImhlaWdodCIsIndpZHRoIiwib25DaGFuZ2UiLCJjdXJyZW50VGFyZ2V0Iiwib25Gb2N1cyIsIm9uQmx1ciIsIldlbGNvbWVWaWV3IiwibGF6eSIsIkNsYXNzVmlldyIsIndpdGhSb3V0ZXIiLCJtb3VudGVkIiwibW9kYWwiLCJwcm90b3R5cGUiLCJBcnJheSIsImNsYXNzSW5kZXgiLCJmaW5kSW5kZXgiLCJjbGFzc0RhdGEiLCJuZXdDbGFzcyIsInB1c2giLCJoaXN0b3J5IiwiY3JlYXRlQ2xhc3MiLCJyb3V0ZSIsImZpbHRlciIsInJlbW92ZUNsYXNzIiwidG9nZ2xlTW9kYWwiLCJ1c2VFZmZlY3QiLCJ1bmRlZmluZWQiLCJmaW5kIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInNwbGl0IiwiQ2xhc3NUYWJzIiwiZXhhY3QiLCJwYXRoIiwicmVuZGVyIiwiY29tcG9uZW50IiwiU3VzcGVuc2UiLCJmYWxsYmFjayIsIm1hdGNoIiwicGFyYW1zIiwiY2xhc3NJZCIsImFzeW5jIiwic2VuZFJlcXVlc3QiLCJtZXRob2QiLCJyZXNvdXJjZSIsImluaXQiLCJSZXF1ZXN0IiwidXJsIiwiRXJyb3IiLCJoZWFkZXJzIiwiYm9keSIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJyZWRpcmVjdCIsInJlZmVycmVyIiwicmVmZXJyZXJQb2xpY3kiLCJpbnRlZ3JpdHkiLCJrZWVwYWxpdmUiLCJzaWduYWwiLCJKU09OIiwic3RyaW5naWZ5IiwiSGVhZGVycyIsInNldCIsInJlc3BvbnNlIiwiZmV0Y2giLCJTdHJpbmciLCJzdGF0dXMiLCJjb250ZW50VHlwZSIsImdldCIsImluY2x1ZGVzIiwiVHlwZUVycm9yIiwianNvbiIsInN1Y2Nlc3MiLCJjbGFzcyIsImxvYWQiLCJhZGQiLCJuYW1lIiwiZGVsZXRlIiwic3R1ZGVudCIsInN0dWRlbnRJZCIsImFzc2lnbm1lbnQiLCJzY29yZXMiLCJ1cGRhdGUiXSwic291cmNlUm9vdCI6IiJ9